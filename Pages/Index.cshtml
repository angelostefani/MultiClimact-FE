@page
@model IndexModel
@{
    ViewData["Title"] = Localizer["title"];
}

@if (!User.Identity.IsAuthenticated)
{
    <!-- Hero -->
    <div class="p-5 text-center bg-image rounded-3" style="
        background-image: url('https://localhost:7121/images/MULTICLIMACT-Powerpoint-Template.jpg');
        height: 720px; width:1280px;
            ">
    </div>
}
else
{
    <!-- Contenitore per la mappa -->
    <div id="map" class="map" style="width: 100%; height: 400px;"></div>

    <!-- Script per caricare OpenLayers e il file GeoJSON -->
    <script src="https://cdn.jsdelivr.net/npm/ol@6.5.0/dist/ol.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@6.5.0/dist/ol.css" />

    <script>
        // Carica il file GeoJSON quando l'utente è autenticato
        const url = 'https://openlayers.org/data/vector/ecoregions.json';
        fetch(url)
            .then(response => response.json())
            .then(data => {
                // Crea una mappa utilizzando OpenLayers
                var map = new ol.Map({
                    target: 'map',
                    layers: [
                        new ol.layer.Tile({
                            source: new ol.source.OSM()
                        }),
                        new ol.layer.Vector({
                            source: new ol.source.Vector({
                                features: new ol.format.GeoJSON().readFeatures(data)
                            })
                        })
                    ],
                    view: new ol.View({
                        center: ol.proj.fromLonLat([0, 0]),
                        zoom: 2
                    })
                });
            })
            .catch(error => {
                console.error('Error loading GeoJSON:', error);
            });
    </script>
}
